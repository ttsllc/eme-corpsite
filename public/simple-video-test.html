<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Video Test</title>
    <style>
        body { 
            background: #111; 
            color: white; 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            margin: 0;
        }
        .test-container { 
            max-width: 800px; 
            margin: 0 auto; 
        }
        video { 
            width: 100%; 
            max-width: 640px; 
            background: #222; 
            border: 2px solid #444;
            margin: 20px 0;
        }
        .info { 
            background: #333; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
        }
        .error { 
            background: #500; 
            color: #fcc;
        }
        .success { 
            background: #050; 
            color: #cfc;
        }
        button {
            background: #555;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #777; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¬ Paul Fernandez Video Test</h1>
        
        <div class="info">
            <h3>Test 1: æœ€ã‚‚äº’æ›æ€§ã®é«˜ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (7.1MB)</h3>
            <video id="video1" controls preload="metadata" width="640">
                <source src="/videos/paul-fernandez-intro-compatible.mp4" type="video/mp4">
                ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
            </video>
            <div>
                <button onclick="playVideo(1)">å†ç”Ÿ</button>
                <button onclick="pauseVideo(1)">ä¸€æ™‚åœæ­¢</button>
                <button onclick="reloadVideo(1)">ãƒªãƒ­ãƒ¼ãƒ‰</button>
            </div>
            <div id="status1" class="info">å¾…æ©Ÿä¸­...</div>
        </div>

        <div class="info">
            <h3>Test 2: æ¨™æº–çš„ãªHTML5å‹•ç”»ãƒ†ã‚¹ãƒˆ</h3>
            <video controls width="640">
                <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                ãƒ†ã‚¹ãƒˆå‹•ç”»ãŒå†ç”Ÿã§ãã¾ã›ã‚“
            </video>
            <p><small>å¤–éƒ¨ãƒ†ã‚¹ãƒˆå‹•ç”» - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ãƒ–ãƒ©ã‚¦ã‚¶åŸºæœ¬æ©Ÿèƒ½ç¢ºèªç”¨</small></p>
        </div>

        <div class="info">
            <h3>Test 3: å‹•ç”»æƒ…å ±</h3>
            <div id="videoInfo"></div>
            <button onclick="showVideoInfo()">å‹•ç”»æƒ…å ±ã‚’è¡¨ç¤º</button>
        </div>

        <div class="info">
            <h3>ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±</h3>
            <div id="browserInfo"></div>
        </div>

        <div class="info">
            <h3>ãƒ­ã‚°</h3>
            <div id="log" style="max-height: 200px; overflow-y: auto; background: #222; padding: 10px; border-radius: 4px;"></div>
            <button onclick="clearLog()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
        </div>
    </div>

    <script>
        const log = (message, type = 'info') => {
            const timestamp = new Date().toLocaleTimeString();
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.innerHTML = `[${timestamp}] ${message}`;
            entry.style.color = type === 'error' ? '#ff6666' : type === 'success' ? '#66ff66' : '#66ccff';
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[${timestamp}] ${message}`);
        };

        const updateStatus = (message, type = 'info') => {
            const status = document.getElementById('status1');
            status.textContent = message;
            status.className = type === 'error' ? 'info error' : type === 'success' ? 'info success' : 'info';
        };

        const playVideo = (num) => {
            const video = document.getElementById(`video${num}`);
            video.play().then(() => {
                updateStatus('å†ç”Ÿé–‹å§‹', 'success');
                log('å‹•ç”»å†ç”ŸæˆåŠŸ', 'success');
            }).catch(error => {
                updateStatus(`å†ç”Ÿã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                log(`å†ç”Ÿã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            });
        };

        const pauseVideo = (num) => {
            const video = document.getElementById(`video${num}`);
            video.pause();
            updateStatus('ä¸€æ™‚åœæ­¢');
            log('å‹•ç”»ä¸€æ™‚åœæ­¢');
        };

        const reloadVideo = (num) => {
            const video = document.getElementById(`video${num}`);
            video.load();
            updateStatus('ãƒªãƒ­ãƒ¼ãƒ‰ä¸­...');
            log('å‹•ç”»ãƒªãƒ­ãƒ¼ãƒ‰');
        };

        const showVideoInfo = () => {
            const video = document.getElementById('video1');
            const info = document.getElementById('videoInfo');
            info.innerHTML = `
                <p><strong>å‹•ç”»URL:</strong> ${video.currentSrc || 'ãªã—'}</p>
                <p><strong>Ready State:</strong> ${video.readyState} (${getReadyStateText(video.readyState)})</p>
                <p><strong>Network State:</strong> ${video.networkState} (${getNetworkStateText(video.networkState)})</p>
                <p><strong>Duration:</strong> ${video.duration || 'ãªã—'} ç§’</p>
                <p><strong>Current Time:</strong> ${video.currentTime} ç§’</p>
                <p><strong>Paused:</strong> ${video.paused}</p>
                <p><strong>Ended:</strong> ${video.ended}</p>
                <p><strong>Error:</strong> ${video.error ? `Code: ${video.error.code}, Message: ${video.error.message}` : 'ãªã—'}</p>
                <p><strong>Can Play Type (MP4):</strong> ${video.canPlayType('video/mp4')}</p>
                <p><strong>Can Play Type (MP4 H.264):</strong> ${video.canPlayType('video/mp4; codecs="avc1.42E01E"')}</p>
            `;
        };

        const getReadyStateText = (state) => {
            const states = ['HAVE_NOTHING', 'HAVE_METADATA', 'HAVE_CURRENT_DATA', 'HAVE_FUTURE_DATA', 'HAVE_ENOUGH_DATA'];
            return states[state] || 'UNKNOWN';
        };

        const getNetworkStateText = (state) => {
            const states = ['NETWORK_EMPTY', 'NETWORK_IDLE', 'NETWORK_LOADING', 'NETWORK_NO_SOURCE'];
            return states[state] || 'UNKNOWN';
        };

        const clearLog = () => {
            document.getElementById('log').innerHTML = '';
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±
            const browserInfo = document.getElementById('browserInfo');
            browserInfo.innerHTML = `
                <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
                <p><strong>Online:</strong> ${navigator.onLine}</p>
                <p><strong>Language:</strong> ${navigator.language}</p>
                <p><strong>Platform:</strong> ${navigator.platform}</p>
                <p><strong>Current URL:</strong> ${window.location.href}</p>
            `;

            // å‹•ç”»ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            const video = document.getElementById('video1');
            
            video.addEventListener('loadstart', () => {
                log('å‹•ç”»èª­ã¿è¾¼ã¿é–‹å§‹');
                updateStatus('èª­ã¿è¾¼ã¿ä¸­...');
            });
            
            video.addEventListener('loadedmetadata', () => {
                log('ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†');
            });
            
            video.addEventListener('loadeddata', () => {
                log('å‹•ç”»ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†', 'success');
                updateStatus('èª­ã¿è¾¼ã¿å®Œäº†', 'success');
            });
            
            video.addEventListener('canplay', () => {
                log('å†ç”Ÿå¯èƒ½çŠ¶æ…‹', 'success');
                updateStatus('å†ç”Ÿæº–å‚™å®Œäº†', 'success');
            });
            
            video.addEventListener('canplaythrough', () => {
                log('ã‚¹ãƒ ãƒ¼ã‚ºå†ç”Ÿå¯èƒ½', 'success');
            });
            
            video.addEventListener('error', (e) => {
                const error = video.error;
                log(`å‹•ç”»ã‚¨ãƒ©ãƒ¼: Code ${error.code} - ${error.message}`, 'error');
                updateStatus(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            });
            
            video.addEventListener('play', () => {
                log('å†ç”Ÿé–‹å§‹', 'success');
            });
            
            video.addEventListener('pause', () => {
                log('ä¸€æ™‚åœæ­¢');
            });

            video.addEventListener('ended', () => {
                log('å†ç”Ÿçµ‚äº†');
            });

            log('ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†');
        });
    </script>
</body>
</html>
