<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Debug Tool</title>
    <style>
        body { background: #111; color: white; font-family: Arial, sans-serif; padding: 20px; }
        .video-container { margin: 20px 0; padding: 20px; border: 1px solid #333; border-radius: 8px; }
        .status { margin: 10px 0; padding: 10px; background: #222; border-radius: 4px; }
        .error { background: #500; }
        .success { background: #050; }
        .info { background: #005; }
        video { width: 100%; max-width: 640px; background: #222; }
        button { margin: 5px; padding: 10px; background: #333; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #555; }
    </style>
</head>
<body>
    <h1>ğŸ¬ Paul Fernandez Video Debug Tool</h1>
    
    <div class="video-container">
        <h2>äº’æ›æ€§ç‰ˆ (7.1MB) - æ¨å¥¨</h2>
        <div id="status1" class="status info">å¾…æ©Ÿä¸­...</div>
        <video id="video1" controls preload="metadata">
            <source src="/videos/paul-fernandez-intro-compatible.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div>
            <button onclick="testVideo(1)">å†ç”Ÿãƒ†ã‚¹ãƒˆ</button>
            <button onclick="checkFile(1)">ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª</button>
            <button onclick="showInfo(1)">è©³ç´°æƒ…å ±</button>
        </div>
        <small style="color: #999;">Baseline Profile, yuv420p, 640x480</small>
    </div>

    <div class="video-container">
        <h2>æ¨™æº–ç‰ˆ (26MB)</h2>
        <div id="status2" class="status info">å¾…æ©Ÿä¸­...</div>
        <video id="video2" controls preload="metadata">
            <source src="/videos/paul-fernandez-intro.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div>
            <button onclick="testVideo(2)">å†ç”Ÿãƒ†ã‚¹ãƒˆ</button>
            <button onclick="checkFile(2)">ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª</button>
            <button onclick="showInfo(2)">è©³ç´°æƒ…å ±</button>
        </div>
    </div>

    <div class="video-container">
        <h2>ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h2>
        <div id="systemInfo" class="status info">
            <p><strong>ãƒ–ãƒ©ã‚¦ã‚¶:</strong> <span id="browserInfo"></span></p>
            <p><strong>å¯¾å¿œå½¢å¼:</strong> <span id="supportInfo"></span></p>
            <p><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯:</strong> <span id="networkInfo"></span></p>
        </div>
    </div>

    <div class="video-container">
        <h2>ãƒ­ã‚°</h2>
        <div id="log" class="status" style="max-height: 300px; overflow-y: auto;"></div>
        <button onclick="clearLog()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
    </div>

    <script>
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.innerHTML = `[${timestamp}] ${message}`;
            entry.style.color = type === 'error' ? '#ff6666' : type === 'success' ? '#66ff66' : '#66ccff';
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function updateStatus(videoNum, message, type = 'info') {
            const status = document.getElementById(`status${videoNum}`);
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function testVideo(videoNum) {
            const video = document.getElementById(`video${videoNum}`);
            updateStatus(videoNum, 'å†ç”Ÿãƒ†ã‚¹ãƒˆä¸­...', 'info');
            log(`Video ${videoNum}: å†ç”Ÿãƒ†ã‚¹ãƒˆé–‹å§‹`);
            
            video.currentTime = 0;
            video.play().then(() => {
                updateStatus(videoNum, 'å†ç”ŸæˆåŠŸï¼', 'success');
                log(`Video ${videoNum}: å†ç”ŸæˆåŠŸ`, 'success');
            }).catch(error => {
                updateStatus(videoNum, `å†ç”Ÿã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                log(`Video ${videoNum}: å†ç”Ÿã‚¨ãƒ©ãƒ¼ - ${error.message}`, 'error');
            });
        }

        function checkFile(videoNum) {
            const video = document.getElementById(`video${videoNum}`);
            const src = video.querySelector('source').src;
            
            updateStatus(videoNum, 'ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªä¸­...', 'info');
            log(`Video ${videoNum}: ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª - ${src}`);
            
            fetch(src, { method: 'HEAD' })
                .then(response => {
                    if (response.ok) {
                        const size = response.headers.get('content-length');
                        const type = response.headers.get('content-type');
                        updateStatus(videoNum, `ãƒ•ã‚¡ã‚¤ãƒ« OK (${(size/1024/1024).toFixed(1)}MB, ${type})`, 'success');
                        log(`Video ${videoNum}: ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªæˆåŠŸ - Size: ${(size/1024/1024).toFixed(1)}MB, Type: ${type}`, 'success');
                    } else {
                        updateStatus(videoNum, `ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼: ${response.status}`, 'error');
                        log(`Video ${videoNum}: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ - Status: ${response.status}`, 'error');
                    }
                })
                .catch(error => {
                    updateStatus(videoNum, `ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    log(`Video ${videoNum}: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ - ${error.message}`, 'error');
                });
        }

        function showInfo(videoNum) {
            const video = document.getElementById(`video${videoNum}`);
            log(`Video ${videoNum} è©³ç´°æƒ…å ±:`);
            log(`- Ready State: ${video.readyState}`);
            log(`- Network State: ${video.networkState}`);
            log(`- Duration: ${video.duration}`);
            log(`- Current Time: ${video.currentTime}`);
            log(`- Paused: ${video.paused}`);
            log(`- Ended: ${video.ended}`);
            log(`- Error: ${video.error ? video.error.message : 'ãªã—'}`);
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ã®å–å¾—
        function getSystemInfo() {
            const browserInfo = navigator.userAgent;
            document.getElementById('browserInfo').textContent = browserInfo;

            // å‹•ç”»å¯¾å¿œå½¢å¼ã®ç¢ºèª
            const video = document.createElement('video');
            const formats = [
                'video/mp4; codecs="avc1.42E01E"',
                'video/quicktime',
                'video/webm',
                'video/ogg'
            ];
            
            const supported = formats.filter(format => video.canPlayType(format) !== '');
            document.getElementById('supportInfo').textContent = supported.length > 0 ? supported.join(', ') : 'å¯¾å¿œå½¢å¼ãªã—';

            // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ…‹ã¨URLæƒ…å ±
            const currentUrl = window.location.href;
            document.getElementById('networkInfo').textContent = `${navigator.onLine ? 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' : 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'} | ${currentUrl}`;
        }

        // å„å‹•ç”»ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        [1, 2].forEach(num => {
            const video = document.getElementById(`video${num}`);
            
            video.addEventListener('loadstart', () => {
                log(`Video ${num}: èª­ã¿è¾¼ã¿é–‹å§‹`);
                updateStatus(num, 'èª­ã¿è¾¼ã¿ä¸­...', 'info');
            });
            
            video.addEventListener('loadedmetadata', () => {
                log(`Video ${num}: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†`);
            });
            
            video.addEventListener('loadeddata', () => {
                log(`Video ${num}: ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†`, 'success');
                updateStatus(num, 'èª­ã¿è¾¼ã¿å®Œäº†', 'success');
            });
            
            video.addEventListener('canplay', () => {
                log(`Video ${num}: å†ç”Ÿå¯èƒ½`, 'success');
                updateStatus(num, 'å†ç”Ÿæº–å‚™OK', 'success');
            });
            
            video.addEventListener('error', (e) => {
                const error = video.error;
                log(`Video ${num}: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ - Code: ${error.code}, Message: ${error.message}`, 'error');
                updateStatus(num, `ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            });
            
            video.addEventListener('play', () => {
                log(`Video ${num}: å†ç”Ÿé–‹å§‹`, 'success');
            });
            
            video.addEventListener('pause', () => {
                log(`Video ${num}: ä¸€æ™‚åœæ­¢`);
            });
        });

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            getSystemInfo();
            log('ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«åˆæœŸåŒ–å®Œäº†');
        });
    </script>
</body>
</html>
